<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habit Tracker - Database Education</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Left Panel: Habit Tracker App -->
        <div class="app-panel">
            <div class="app-header">
                <h1>üì± Habit Tracker</h1>
                <p class="current-date" id="currentDateDisplay">Loading...</p>
            </div>

            <div class="app-content">
                <!-- Today's Habits -->
                <section class="today-section">
                    <h2 id="habitsHeading">Today's Habits</h2>
                    <div id="todayHabits" class="habits-list">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Add New Habit -->
                <section class="add-habit-section">
                    <h2>Add New Habit</h2>
                    <form id="addHabitForm">
                        <div class="form-group">
                            <label for="habitName">Habit Name</label>
                            <input type="text" id="habitName" placeholder="e.g., Exercise" required>
                        </div>

                        <div class="form-group">
                            <label for="habitIcon">Icon</label>
                            <select id="habitIcon">
                                <option value="üí™">üí™ Exercise</option>
                                <option value="üìö">üìö Reading</option>
                                <option value="üßò">üßò Meditation</option>
                                <option value="üíß">üíß Water</option>
                                <option value="ü•ó">ü•ó Healthy Eating</option>
                                <option value="üò¥">üò¥ Sleep</option>
                                <option value="üìù">üìù Journal</option>
                                <option value="üéØ">üéØ Goals</option>
                                <option value="üö∂">üö∂ Walking</option>
                                <option value="üíä">üíä Vitamins</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="frequencyType">Frequency</label>
                            <select id="frequencyType">
                                <option value="daily">Daily</option>
                                <option value="specific_days">Specific Days of Week</option>
                                <option value="times_per_week">X Times per Week</option>
                                <option value="times_per_month">X Times per Month</option>
                                <option value="times_per_year">X Times per Year</option>
                            </select>
                        </div>

                        <!-- Specific Days Selection -->
                        <div class="form-group days-selection" id="daysSelection" style="display: none;">
                            <label>Select Days</label>
                            <div class="days-checkboxes">
                                <label><input type="checkbox" value="0"> Sun</label>
                                <label><input type="checkbox" value="1"> Mon</label>
                                <label><input type="checkbox" value="2"> Tue</label>
                                <label><input type="checkbox" value="3"> Wed</label>
                                <label><input type="checkbox" value="4"> Thu</label>
                                <label><input type="checkbox" value="5"> Fri</label>
                                <label><input type="checkbox" value="6"> Sat</label>
                            </div>
                        </div>

                        <!-- Times Per Period -->
                        <div class="form-group times-per-period" id="timesPerPeriod" style="display: none;">
                            <label for="targetCount">How many times?</label>
                            <input type="number" id="targetCount" min="1" max="365" value="3">
                        </div>

                        <button type="submit" class="btn-primary">Add Habit</button>
                    </form>
                </section>

                <!-- Calendar Navigation -->
                <section class="calendar-section">
                    <h2>Navigate to Date</h2>
                    <div class="calendar-widget">
                        <div class="calendar-header">
                            <button class="btn-calendar-nav" id="prevMonth">&lt;</button>
                            <span class="calendar-month" id="calendarMonth">December 2025</span>
                            <button class="btn-calendar-nav" id="nextMonth">&gt;</button>
                        </div>
                        <div class="calendar-grid">
                            <div class="calendar-day-header">Su</div>
                            <div class="calendar-day-header">Mo</div>
                            <div class="calendar-day-header">Tu</div>
                            <div class="calendar-day-header">We</div>
                            <div class="calendar-day-header">Th</div>
                            <div class="calendar-day-header">Fr</div>
                            <div class="calendar-day-header">Sa</div>
                        </div>
                        <div class="calendar-days" id="calendarDays">
                            <!-- Populated by JS -->
                        </div>
                        <button class="btn-today" id="goToToday">Today</button>
                    </div>
                </section>

                <!-- All Habits -->
                <section class="all-habits-section">
                    <h2>All Habits</h2>
                    <div id="allHabits" class="habits-list">
                        <!-- Populated by JS -->
                    </div>
                </section>
            </div>
        </div>

        <!-- Right Panel: Database Visualization -->
        <div class="db-panel">
            <div class="db-header">
                <div class="db-header-row">
                    <div>
                        <h1>üóÑÔ∏è Database Tables</h1>
                        <p class="db-subtitle">See the data behind the app</p>
                    </div>
                    <button class="btn-erd" id="openErdBtn">View ERD Diagram</button>
                </div>
            </div>

            <div class="db-content">
                <!-- Habits Table -->
                <div class="db-table-container">
                    <div class="table-header">
                        <h3>üìã habits</h3>
                        <span class="row-count" id="habitsCount">0 rows</span>
                    </div>
                    <div class="table-wrapper">
                        <table id="habitsTable">
                            <thead>
                                <tr>
                                    <th>id</th>
                                    <th>name</th>
                                    <th>icon</th>
                                    <th>frequency_type</th>
                                    <th>frequency_days</th>
                                    <th>target_count</th>
                                    <th>created_at</th>
                                    <th>is_active</th>
                                </tr>
                            </thead>
                            <tbody id="habitsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Completions Table -->
                <div class="db-table-container">
                    <div class="table-header">
                        <h3>‚úÖ completions</h3>
                        <span class="row-count" id="completionsCount">0 rows</span>
                    </div>
                    <div class="table-wrapper">
                        <table id="completionsTable">
                            <thead>
                                <tr>
                                    <th>id</th>
                                    <th>habit_id</th>
                                    <th>completed_at</th>
                                    <th>notes</th>
                                </tr>
                            </thead>
                            <tbody id="completionsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Query Log -->
                <div class="db-table-container query-log-container">
                    <div class="table-header">
                        <h3>üìú Query Log</h3>
                        <button class="btn-clear" id="clearQueryLog">Clear</button>
                    </div>
                    <div class="query-log" id="queryLog">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ERD Modal -->
    <div class="modal-overlay" id="erdModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Entity Relationship Diagram</h2>
                <button class="modal-close" id="closeErdBtn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="erd-container">
                    <!-- Habits Table -->
                    <div class="erd-table" id="erd-habits">
                        <div class="erd-table-header">habits</div>
                        <div class="erd-table-body">
                            <div class="erd-column">
                                <span class="erd-key">PK</span>
                                <span class="erd-col-name">id</span>
                                <span class="erd-col-type">INTEGER</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">name</span>
                                <span class="erd-col-type">VARCHAR(255)</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">icon</span>
                                <span class="erd-col-type">VARCHAR(10)</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">frequency_type</span>
                                <span class="erd-col-type">VARCHAR(50)</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">frequency_days</span>
                                <span class="erd-col-type">VARCHAR(20)</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">target_count</span>
                                <span class="erd-col-type">INTEGER</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">created_at</span>
                                <span class="erd-col-type">TIMESTAMP</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">is_active</span>
                                <span class="erd-col-type">BOOLEAN</span>
                            </div>
                        </div>
                    </div>

                    <!-- Connection Line -->
                    <div class="erd-connection">
                        <div class="erd-line"></div>
                        <div class="erd-relationship">
                            <span class="erd-cardinality left">1</span>
                            <span class="erd-rel-label">has many</span>
                            <span class="erd-cardinality right">N</span>
                        </div>
                    </div>

                    <!-- Completions Table -->
                    <div class="erd-table" id="erd-completions">
                        <div class="erd-table-header">completions</div>
                        <div class="erd-table-body">
                            <div class="erd-column">
                                <span class="erd-key">PK</span>
                                <span class="erd-col-name">id</span>
                                <span class="erd-col-type">INTEGER</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key fk">FK</span>
                                <span class="erd-col-name">habit_id</span>
                                <span class="erd-col-type">INTEGER</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">completed_at</span>
                                <span class="erd-col-type">TIMESTAMP</span>
                            </div>
                            <div class="erd-column">
                                <span class="erd-key"></span>
                                <span class="erd-col-name">notes</span>
                                <span class="erd-col-type">TEXT</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="erd-legend">
                    <h3>Legend</h3>
                    <div class="erd-legend-items">
                        <div class="erd-legend-item">
                            <span class="erd-key">PK</span>
                            <span>Primary Key - Unique identifier for each row</span>
                        </div>
                        <div class="erd-legend-item">
                            <span class="erd-key fk">FK</span>
                            <span>Foreign Key - References another table's primary key</span>
                        </div>
                        <div class="erd-legend-item">
                            <span class="erd-cardinality-example">1 : N</span>
                            <span>One-to-Many relationship (one habit can have many completions)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
